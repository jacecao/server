<div class="ctrl">
  <button type="button" class="btn btn-info form-edit">编辑</button>
  <button type="button" class="btn btn-info form-cancel" disabled>取消编辑</button>
</div>
<form class="show-form header-form form-reset form-static">
  <h3>封面图片展示</h3><hr>
  <div class="form-group">
    <div class="add-img">
      {if isset($bgimg) and !empty($bgimg)}
      <div class="row">
        <!-- 这里需要判断的是bgimg是不是多维数组 -->
        <!-- 所以这里需要添加isset($bgimg[0].img_id)来判断是不是多维数组 -->
        {if is_array($bgimg) and isset($bgimg[0].img_id)}
        {foreach $bgimg as $image}
        <div class="col-md-6 scan-box-{$image@index}">
          <div class="show_image">
            <img class="scan-img scan-img-post" src="{$image.img_url}" title="{$image.img_desc}">
            <button type="button" class="btn btn-warning del-scan" data-id="{$image@index}"><span class="glyphicon glyphicon-trash"></span></button>
          </div>
          <div class="img-info">
            <input type="hidden" name="img_id[]" value="{$image.img_id|default:''}">
            <input type="hidden" name="img_url[]" value="{$image.img_url|default:''}">
            <input type="hidden" name="img_name[]" value="{$image.img_name|default:''}">
            <input type="hidden" name="img_desc[]" value="{$image.img_desc|default:'header image'}">
          </div>
        </div>
        {/foreach}
        {/if}
      </div>
      {else}
      <div class="row">
        <div class="show_image">
          <img class="scan-img scan-img-post" src="{$bgimg.img_url|default: '请上传图片'}">
        </div>
        <div class="col-md-6">
          <button type="button" class="btn btn-default btn-check" disabled>上传图片
            <input class="fileinput fileinput_post" type="file" name="postimg" data-id="post">
          </button>
          <span class="imgname filename_post">{$bgimg.img_name|default: '请上传图片'}</span>
        </div>
        <button type="button" class="btn btn-info col-md-1 up-header-post" data-id="post" disabled>上传</button>
        <button type="button" class="btn btn-primary col-md-2 col-md-offset-1 choose choose-header-post" data-toggle="modal" data-id="header-post" data-dir="header" data-target="#choosefile" >选择图片</button>
      </div>
      {/if}
    </div>
    <div class="add-box"></div>
    <div class="post-box"></div>
    <div class="add-btn">
      <button class="add addimg-header btn btn-default" type="button"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></button>
    </div>
  </div>
  <button type="button" class="btn btn-warning sub-header">保存</button>
</form>

<div class="modal fade" id="choosefile" tabindex="-1" role="dialog" aria-labelledby="choosefile">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">请挑选图片</h4>
      </div>
      <div class="modal-body choose-body">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
        <button type="button" class="btn btn-primary choose-ok">确认</button>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="static/js/mainform.js"></script>
<script type="text/javascript" src="static/js/control.js"></script>
